{
   "id":"wenet_ask_4_help_with_norms_v1",
   "name":"Ask for Help",
   "description":"Ask a question into your community to helps you",
   "keywords":[
      "question",
      "answer",
      "help"
   ],
   "attributes":{
      "kindOfAnswerer":{
         "type":"string",
         "description":"The type of user shoud answer the question",
         "enum":[
            "different than me",
            "similar to me",
            "anyone"
         ]
      }
   },
   "transactions":{
      "answerTransaction":{
         "type":"object",
         "description":"Answer to a question",
         "properties":{
            "answer":{
               "type":"string",
               "description":"The answer to the question"
            }
         }
      },
      "notAnswerTransaction":{
         "description":"Ignore a question"
      },
      "bestAnswerTransaction":{
         "type":"object",
         "description":"Pick the best answer",
         "properties":{
            "transactionId":{
               "type":"string",
               "description":"The id of the picked answer transaction"
            },
            "reason":{
               "type":"string",
               "nullable":"true",
               "description":"The reason why the specific answer was picked"
            }
         }
      },
      "moreAnswerTransaction":{
         "description":"Ask some more users"
      },
      "reportQuestionTransaction":{
         "type":"object",
         "description":"Report question",
         "properties":{
            "reason":{
               "type":"string",
               "nullable":"true",
               "description":"The reason why the specific answer was picked"
            },
            "comment":{
               "type":"string",
               "nullable":"true",
               "description":"A specific comment by the reporting user"
            }
         }
      },
      "reportAnswerTransaction":{
         "type":"object",
         "description":"Report answer",
         "properties":{
            "transactionId":{
               "type":"string",
               "description":"The id of the picked answer transaction"
            },
            "reason":{
               "type":"string",
               "nullable":"true",
               "description":"The reason why the specific answer was picked"
            },
            "comment":{
               "type":"string",
               "nullable":"true",
               "description":"A specific comment by the reporting user"
            }
         }
      }
   },
   "callbacks":{
      "QuestionToAnswerMessage":{
         "description":"Question to answer",
         "properties":{
            "taskId":{
               "type":"string",
               "description":"The id of the task assiciated with the question"
            },
            "question":{
               "type":"string",
               "description":"The question to answer to"
            },
            "userId":{
               "type":"string",
               "description":"The id of the user who proposed the question"
            }
         }
      },
      "AnsweredQuestionMessage":{
         "description":"Answer to question",
         "properties":{
            "taskId":{
               "type":"string",
               "description":"The id of the task assiciated with the question"
            },
            "answer":{
               "type":"string",
               "description":"The answer to the question"
            },
            "transactionId":{
               "type":"string",
               "description":"The id of the transaction associated to the answer"
            },
            "userId":{
               "type":"string",
               "description":"The id of the user who answered the question"
            }
         }
      },
      "AnsweredPickedMessage":{
         "description":"Answer picked",
         "properties":{
            "taskId":{
               "type":"string",
               "description":"The id of the task assiciated with the question"
            },
            "transactionId":{
               "type":"string",
               "description":"The id of the transaction associated to the answer"
            }
         }
      }
   },
   "norms":[
      {
         "whenever":"is_received_created_task()",
         "thenceforth":"add_created_transaction() and get_app_users_except_me(Unanswered) and send_messages(Unanswered,'notifyNewAskForHelp',json([]))"
      },
      {
         "whenever":"is_received(_,'notifyNewAskForHelp',_)",
         "thenceforth":"get_task_goal_name(Question) and get_task_requester_id(UserId) and send_user_message('QuestionToAnswerMessage',json([question=Question,userId=UserId]))"
      }
   	]
}